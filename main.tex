\documentclass[a4paper,twocolumn,10pt]{article}
% \usepackage{fontspec}
%     \setmainfont{Fira Sans}
%     \setmonofont{Inconsolata}
% \usepackage[fakebold]{firamath-otf}
\usepackage[margin=15mm]{geometry}
\usepackage[hidelinks,bookmarksdepth=4]{hyperref} % clickable links
\usepackage[fleqn]{amsmath}
\usepackage{amssymb}
% \usepackage{graphicx} % make images work again (MIWA!)
% \usepackage{subcaption} % makes subfigures
\usepackage[labelfont={bf,footnotesize,singlespacing},textfont={footnotesize,singlespacing},justification={centering},singlelinecheck=false,margin=0pt]{caption} % format captions
\usepackage{chemformula} % does what it says on the tin
\usepackage[separate-uncertainty=true,mode=text]{siunitx} % number and unit fun
% \usepackage{booktabs} % shiny tables
% \usepackage{tabularx} % flexi-tables
\usepackage{enumitem} % control lists
    \setlist{nosep} % make lists more compact
% \usepackage[lists=normal]{savetrees} % extreme

\title{CENG97009 Advanced Process Optimisation 1}
\author{Andreas Richardson}
\date{April 2021}

\begin{document}

\maketitle

% \tableofcontents

\section{Lecture 1}

\subsection{Problem formulation}
\begin{equation}
\begin{array}{cc}
\min_{\boldsymbol{x}, \boldsymbol{y}}     & f(\boldsymbol{x}, \boldsymbol{y}) \\
\text { s.t. }  & \boldsymbol{g}(\boldsymbol{x}, \boldsymbol{y}) \leq \mathbf{0} \\
                & \boldsymbol{h}(\boldsymbol{x}, \boldsymbol{y}) = \mathbf{0} \\
                & \boldsymbol{x} \in X \subset \mathbb{R}^{n} \\
                & \boldsymbol{y} \in\{0,1\}^{q}
\end{array}
\end{equation}
Bound constraints also feature:
\begin{align}
    x-x^{U} &\leq 0 & x^{L}-x &\leq 0
\end{align}

\subsection{Nonlinear optimisation}
\begin{description}
    \item[Degrees of Freedom] $\operatorname{DoF}=\operatorname{dim}(\boldsymbol{x})-\operatorname{dim}(\boldsymbol{h})$
    \item[Feasible region] $F=\{\boldsymbol{x} \in X: \boldsymbol{h}(\boldsymbol{x})=\mathbf{0}, \boldsymbol{g}(\boldsymbol{x}) \leq \mathbf{0}\}$
    \item[Optimal solution] $\boldsymbol{x}^{*} \in F: f\left(\boldsymbol{x}^{*}\right) \leq f(\boldsymbol{x}) \forall \boldsymbol{x} \in F$ 
\end{description}

\subsection{Basic concepts}
\begin{description}
    \item[Global minimum] $f\left(\boldsymbol{x}^{*}\right) \leq f(\boldsymbol{x}) \forall \boldsymbol{x} \in F$ 
    \item[Strong minimum] If inequality can be strict ($<$)
\end{description}

\subsubsection{Convexity}
\begin{equation*}
    f\left(\alpha \boldsymbol{x}_{1}+(1-\alpha) \boldsymbol{x}_{2}\right) \leq \alpha f\left(\boldsymbol{x}_{1}\right)+(1-\alpha) f\left(\boldsymbol{x}_{2}\right), \forall \alpha \in[0,1]
\end{equation*}
Necessary \& sufficient conditions
\begin{gather*}
    f(x) \text { is convex } \Leftrightarrow f^{\prime \prime}(x) \geq 0 \\
    f(x) \text { is strictly convex } \Leftrightarrow f^{\prime \prime}(x)>0\\
    f(\boldsymbol{x}) \text { is strictly convex } \Leftrightarrow \mathbf{z}^{T} H(\boldsymbol{x}) \mathbf{z}>0, \forall \boldsymbol{x}, \forall \boldsymbol{z} \neq \mathbf{0}
\end{gather*}
Multidimensional functions: $\mathbf{z}^{T} H(\boldsymbol{x}) \mathbf{z}>0$ refers to eigenvalues of the Hessian matrix $H$
\begin{equation}
    H\left(x_{1}, x_{2}\right)=\nabla^{2} f\left(x_{1}, x_{2}\right)=\left(\begin{array}{cc}
    \frac{\partial^{2} f}{\partial x_{1}^{2}} & \frac{\partial^{2} f}{\partial x_{1} \partial x_{2}} \\
    \frac{\partial^{2} f}{\partial x_{1} \partial x_{2}} & \frac{\partial^{2} f}{\partial x_{2}^{2}}
    \end{array}\right)
\end{equation}
\begin{equation}
    \boldsymbol{\lambda} = \begin{cases}
        > 0 & \text{+ve definite} \\
        \geq 0 & \text{+ve semi-definite} \\
        \leq 0 & \text{-ve semi-definite} \\
        < 0 & \text{-ve definite} \\
        \text{else} & \text{indefinite}
    \end{cases}
    \begin{array}{l}
        \left.\begin{array}{l}\mathstrut\\\mathstrut\end{array}\right\}\quad\text{Convex}\\
        \left.\begin{array}{l}\mathstrut\\\mathstrut\end{array}\right\}\quad\text{Nonconvex}\\
        \mathstrut
    \end{array}
\end{equation}
Sets/regions may also be convex (s.43)
If the objective function and feasible region are both convex, the problem is convex and has a unique minimum.
\subsubsection{Optimisation}
Neseccary and sufficient conditions:
\begin{description}
    \item[Stationary point] (min/max/saddle) $\nabla f\left(x^{*}\right)=0$
    \item[Strong local minimum] $\boldsymbol{x}^{T} H\left(\boldsymbol{x}^{*}\right) \boldsymbol{x}>0$ (weak: $\geq$) 
\end{description}

\section{Lecture 2}
\subsection{KKT optimality conditions}
Lagrange function
\begin{equation}
    \mathcal{L}\left(\boldsymbol{x}, \boldsymbol{\lambda}, \boldsymbol{\mu}\right)= f\left(\boldsymbol{x}\right)+\boldsymbol{\lambda}^{T} \boldsymbol{h}\left(\boldsymbol{x}\right)+\boldsymbol{\mu}^{T} \boldsymbol{g}\left(\boldsymbol{x}\right)
\end{equation}
Necessary conditions
\begin{align}
    \nabla_{\boldsymbol{x}} \mathcal{L}\left(\boldsymbol{x}^{*}, \boldsymbol{\lambda}^{*}, \boldsymbol{\mu}^{*}\right)=\mathbf{0} \\
    \boldsymbol{h}(\boldsymbol{x})=\mathbf{0} \\
    \boldsymbol{\mu}^{* T} \boldsymbol{g}\left(\boldsymbol{x}^{*}\right)=\mathbf{0} \\
    \boldsymbol{\mu}^{*} \geq \mathbf{0}
\end{align}
Also sufficient conditions (more complicated, s.26).
Use the iterative active set strategy (s.28).

\section{Lecture 3}
\subsection{Propositional logic}
\begin{tabular}{@{}ll@{}}
    Symbol      & Meaning   \\
    $\vee$      & OR        \\
    $\oplus$    & XOR       \\
    $\wedge$    & AND       \\
    $\neg$      & NOT       
\end{tabular}
\subsection{Algebraic equations}
\begin{enumerate}
    \item Define binary variable $y_i$ for each clause $P_i$
    \item Transform logic expressions to conjunctive normal form ($Q_1 \wedge Q_2 \wedge \ldots \wedge Q_n$)
        \begin{itemize}
            \item Replace implication ($P_{1} \Rightarrow P_{2} \equiv \neg P_1 \vee P_2$)
            \item Apply de Morgan's theorem
                \begin{equation}
                    \begin{array}{l}
                    \neg\left(P_{1} \wedge P_{2}\right) \Leftrightarrow\left(\neg P_{1} \vee \neg P_{2}\right) \\
                    \neg\left(P_{1} \vee P_{2}\right) \Leftrightarrow\left(\neg P_{1} \wedge \neg P_{2}\right)
                    \end{array}
                \end{equation}
            \item Factor out OR over AND
                \begin{equation}
                    \left(P_{1} \wedge P_{2}\right) \vee P_{3} \Leftrightarrow \underbrace{\left(P_{1} \vee P_{3}\right)}_{Q_{1}} \wedge \underbrace{\left(P_{2} \vee P_{3}\right)}_{Q_{2}}
                \end{equation}
        \end{itemize}
\end{enumerate}
Big-M constraints allow either/or and discontinuous expressions.
Can use a series of binary variables to represent integers.
\subsection{Integer cuts}
To remove combination $\tilde{y}$, set $Z=\left\{i: \tilde{y}_{i}=0\right\}$ and $N Z=\left\{i: \tilde{y}_{i}=1\right\}$ then
\begin{equation}
    \sum_{i \in N Z} y_{i}-\sum_{i \in Z} y_{i} \leq|N Z|-1
\end{equation}
\subsection{(MI)LP relaxation}
Remove integrality on $\boldsymbol{y}$; MILP becomes LP. Solution lower or equal to that of original MILP.
\subsection{Branch-and-bound}
Basic idea: fix some $y_k$ and solve relaxed subproblem $P_j$.
\begin{description}
    \item[Branching strategy] commonly most-fractional variable
    \item[Node selection] newest/best bound (depth/breadth)
\end{description}

\section{Lecture 4}

\section{Lecture 5}

Not examinable.

\section{Lecture 6}

\section{Lecture 7}

\end{document}
